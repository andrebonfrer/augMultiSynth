% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/unit_effects.R
\name{unit_effects}
\alias{unit_effects}
\title{Compute unit-level treatment effects for multiple outcomes}
\usage{
unit_effects(
  Y_list,
  treat_time,
  j,
  donors,
  w,
  K = 10,
  use_intercept = TRUE,
  L = 20,
  pooled_beta0 = NULL
)
}
\arguments{
\item{Y_list}{A list of outcome matrices, each \code{N x T}.}

\item{treat_time}{Numeric vector length \code{N}, with first treated period for each unit
(or \code{Inf} for never-treated).}

\item{j}{Integer index of the treated unit.}

\item{donors}{Integer vector of donor unit indices.}

\item{w}{Numeric vector of donor weights of length \code{length(donors)}.}

\item{K}{Integer. Maximum event time to compute (computes \code{k=0,...,K}).}

\item{use_intercept}{Logical. If \code{TRUE}, uses a weighted DiD-style
intercept-shift adjustment by subtracting pre-period means for treated and synthetic.
If \code{FALSE}, returns raw gaps \code{Y_treated - Y_synth}.}

\item{L}{Integer. Number of pre-treatment periods used to define the intercept shift
when \code{use_intercept=TRUE}.}

\item{pooled_beta0}{Optional numeric vector of length \code{M} (number of outcomes).
If provided, shifts the synthetic prediction by \code{pooled_beta0[m]} for outcome \code{m}
in both pre and post periods. This corresponds to an optional pooled regression-adjustment
intercept (multisynth-like) applied after weights are estimated.}
}
\value{
A numeric matrix of dimension \code{M x (K+1)} where \code{M = length(Y_list)}.
Rows correspond to outcomes; columns correspond to event time \code{k=0,...,K}.
}
\description{
Produces event-time treatment effect estimates for a single treated unit
\code{j} across multiple outcomes, using previously estimated donor weights.
}
\details{
Supports an optional pooled regression-adjustment intercept (per outcome) that
shifts synthetic predictions by a constant estimated from pooled pre-treatment
residuals across treated units (multisynth-like adjustment).
}
\examples{
N <- 100; TT <- 80
Y1 <- matrix(rnorm(N*TT), N, TT)
Y2 <- matrix(rnorm(N*TT), N, TT)
treat_time <- rep(Inf, N); treat_time[1:20] <- 50
j <- 1; donors <- which(treat_time > 60)
w <- rep(1/length(donors), length(donors))

# No pooled adjustment:
tau <- unit_effects(list(Y1, Y2), treat_time, j, donors, w, K = 5, L = 10)

# With pooled adjustment (illustrative):
tau2 <- unit_effects(list(Y1, Y2), treat_time, j, donors, w, K = 5, L = 10,
                     pooled_beta0 = c(0.1, -0.2))

}
