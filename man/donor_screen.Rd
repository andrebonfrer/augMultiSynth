% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/donor_screen.R
\name{donor_screen}
\alias{donor_screen}
\title{Screen donors for a treated unit using pre-treatment similarity}
\usage{
donor_screen(
  Y_ref,
  treat_time,
  j,
  K,
  L,
  max_donors = 1000,
  method = c("cor", "mse")
)
}
\arguments{
\item{Y_ref}{A numeric matrix \code{N x T} for a reference outcome used to screen donors.
Typically choose the most informative or least noisy outcome.}

\item{treat_time}{Numeric vector length \code{N}, first treated period per unit (or \code{Inf}).}

\item{j}{Integer index of treated unit.}

\item{K}{Integer. Post window size used for donor eligibility (donors must remain untreated
through \code{treat_time[j] + K}).}

\item{L}{Integer. Number of pre-treatment periods used for screening.}

\item{max_donors}{Integer. Maximum number of donors to return.}

\item{method}{Screening method: \code{"cor"} (correlation) or \code{"mse"} (mean squared error).}
}
\value{
Integer vector of donor indices (subset of eligible donors), length \code{<= max_donors}.
}
\description{
Selects a subset of eligible donors based on similarity to the treated unit in
pre-treatment periods. This is a performance-critical step for large panels.
}
\details{
Eligibility rule implemented:
\itemize{
\item Donors are units with \code{treat_time > treat_time[j] + K} (including never-treated).
}
}
\examples{
N <- 500; T <- 120
Y <- matrix(rnorm(N*T), N, T)
treat_time <- rep(Inf, N); treat_time[1:100] <- 80
donors <- donor_screen(Y, treat_time, j = 1, K = 10, L = 20, max_donors = 200)
length(donors)

}
